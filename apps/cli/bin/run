#!/usr/bin/env node

const { run } = require("../lib");

// Catch uncaught exceptions and suppress EEXIT errors
process.on("uncaughtException", (error) => {
  if (
    error.code === "EEXIT" ||
    (error.oclif && error.oclif.exit !== undefined)
  ) {
    process.exit(error.oclif?.exit || 0);
  }
  throw error;
});

run().catch((error) => {
  if (
    error.code === "EEXIT" ||
    (error.oclif && error.oclif.exit !== undefined)
  ) {
    process.exit(error.oclif?.exit || 0);
  }
  console.error(error);
  process.exit(1);
});
